!function(){"use strict";document.querySelector(".popup_type_preview");class e{constructor(e,t){var s,n;n=()=>{this.inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this.toggleButtonState()}))}))},(s="_setEventListeners")in this?Object.defineProperty(this,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[s]=n,this.settings=e,this.form=t,this.inputList=[...this.form.querySelectorAll(e.inputSelector)],this.button=this.form.querySelector(e.submitButtonSelector)}resetValidation(){this.inputList.forEach((e=>{this._hideError(e),e.classList.remove(this.settings.inputErrorClass)}))}enableValidation(){this.form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this.form)}_showError(e){this.form.querySelector("#".concat(e.id,"-error")).textContent=e.validationMessage}_hideError(e){this.form.querySelector("#".concat(e.id,"-error")).textContent=" "}_checkValidity(e){const{inputErrorClass:t}=this.settings;e.validity.valid?(e.classList.remove(t),this._hideError(e)):(e.classList.add(t),this._showError(e))}_checkValidity(e){const{inputErrorClass:t}=this.settings;e.validity.valid?(e.classList.remove(t),this._hideError(e)):(e.classList.add(t),this._showError(e))}toggleButtonState(){const{inactiveButtonClass:e}=this.settings;this.inputList.every((e=>e.validity.valid))?(this.button.disabled=!1,this.button.classList.remove(e)):(this.button.disabled=!0,this.button.classList.add(e))}}class t{constructor(e,t,s,n,o,r,i){this._name=e.name,this._data=e,this._link=e.link,this._likes=e.likes,this._ownerId=e.owner._id,this._userId=i,this._id=e._id,this._templateSelector=t,this._elementTemplate=this._templateSelector.content.querySelector(".elements__block"),this._handleCardClick=s,this._handleDelete=n,this._handleLike=o,this._deleteLike=r}removecard(){this._element.remove()}createCardElement(){this._element=this._elementTemplate.cloneNode(!0),this._element.querySelector(".elements__title").textContent=this._name,this._element.querySelector(".elements__cover").style.backgroundImage="url(".concat(this._link,")"),this._ownerId!==this._userId&&(this._element.querySelector(".elements__trash").style.display="none"),this._element.querySelector(".elements__trash").addEventListener("click",(()=>{this._handleDelete(this._id)}));const e=this._element.querySelector(".elements__like-counter");return e.textContent=this._likes.length,this._element.querySelector(".elements__like").addEventListener("click",(t=>{t.target.classList.toggle("elements__like_type_active")?(console.log(this._userId,this._ownerId),this._handleLike(this._id),e.textContent=this._likes.length+1):(this._deleteLike(this._id),e.textContent=this._likes.length-1)})),this._likes.some((e=>e._id===this._userId))&&(console.log("something work"),this._element.querySelector(".elements__like").classList.add("elements__like_type_active")),this._element.querySelector(".elements__cover").addEventListener("click",(()=>this._handleCardClick(this._name,this._link))),this._element}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("popup_oppened"),document.addEventListener("keyup",this._handleEscClose.bind(this))}close(){this._popupElement.classList.remove("popup_oppened"),document.removeEventListener("keyup",this._handleEscClose.bind(this))}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target==e.currentTarget&&this.close()}))}}class n extends s{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popupElement.querySelector(".popup__form"),this._saving=document.querySelector(".popup__save-button")}_getInputValues(){const e=[...this._form.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this._saving.textContent="saving..."})),super.setEventListeners()}close(){super.close(),this._form.reset(),this._saving.textContent="save"}}class o extends s{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popupElement.querySelector(".popup__form")}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(),this.close()})),super.setEventListeners()}close(){super.close()}}const r=document.querySelector(".elements"),i=document.querySelector(".popup__input_type_name"),a=document.querySelector(".popup__input_type_description"),l=document.querySelector(".elements__template"),c=document.querySelector(".popup_type_profile-edditor"),u=document.querySelector(".popup_type_card-editor"),p=document.querySelector(".popup_type_change-profile-picture"),h=document.querySelector(".popup_type_delete-card");let _="";const d={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_error"},m=new e(d,c),v=new e(d,u),y=new e(d,p),E=new e(d,h);m.enableValidation(),v.enableValidation(),y.enableValidation(),E.enableValidation();const k=new class{constructor(e){let{userNameSelector:t,userJobSelector:s}=e;this._userName=document.querySelector(t),this._userJob=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,description:this._userJob.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._userName.textContent=t,this._userJob.textContent=s}}({userNameSelector:".profile__info",userJobSelector:".profile__sub-info"}),f=new class{constructor(e,t){this._renderer=e,this._container=t}addItem(e){this._container.prepend(e)}renderItems(e){e.forEach((e=>this.addItem(this._renderer(e))))}}((e=>{const s=new t(e,l,((e,t)=>{g.open(e,t)}),(e=>{const t=new o(".popup_type_delete-card",(()=>{S.deleteCard(e).then((e=>{s.removecard()}))}));t.setEventListeners(),t.open()}),(e=>{S.putlike(e).then((e=>{console.log("liked",e)}))}),(e=>{S.deleteLike(e),console.log("deleted",e)}),_);return s.createCardElement()}),r),S=new class{constructor(e){this._url=e.baseUrl,this._token=e.token}getInitialCards(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._token}}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}addNewCard(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}deleteCard(e){return fetch("".concat(this._url,"/cards/").concat(e," "),{method:"DELETE",headers:{authorization:this._token}}).then((e=>e.ok?{res:e}:Promise.reject("Error: ".concat(e.status))))}putlike(e){return fetch("".concat(this._url,"/cards/likes/").concat(e," "),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((e=>e.ok?{res:e}:Promise.reject("Error: ".concat(e.status))))}deleteLike(e){return fetch("".concat(this._url,"/cards/likes/").concat(e," "),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((e=>e.ok?{res:e}:Promise.reject("Error: ".concat(e.status))))}getInitialProfile(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._token}}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}setInitialProfile(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}changeavatar(e){return fetch("".concat(this._url,"/users/me/avatar "),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.ok?console.log(e):Promise.reject("Error: ".concat(t.status))))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",token:"3b0591f5-8d80-48af-bfb2-1499d5045304","Content-Type":"application/json"});S.getInitialCards().then((e=>{f.renderItems(e)}));const b=document.querySelector(".profile__add-button"),L=new n(".popup_type_card-editor",(e=>{S.addNewCard(e).then((s=>{const n=new t(s,l,(()=>{g.open(e)}),(e=>{const t=new o(".popup_type_delete-card",(()=>{S.deleteCard(e).then((e=>{n.removecard()}))}));t.setEventListeners(),t.open()}));f.addItem(n.createCardElement())}),_),L.close()}));L.setEventListeners(),b.addEventListener("click",(()=>{m.resetValidation(),L.open()}));const g=new class extends s{constructor(e){super(e),this._popupPreview=".popup__preview"}open(e,t){this._popupElement.querySelector(this._popupPreview).src=t,this._popupElement.querySelector(".popup__preview-text").textContent=e,this._popupElement.querySelector(this._popupPreview).alt=e,super.open()}}(".popup_type_preview");g.setEventListeners();let C=document.getElementById("profile-avatar");S.getInitialProfile().then((e=>{k.setUserInfo({name:e.name,about:e.about}),C.src=e.avatar,_=e._id}));const q=document.querySelector(".profile__edit-button"),w=new n(".popup_type_profile-edditor",(e=>{S.setInitialProfile(e).then((e=>{k.setUserInfo(e),w.close()}))}));w.setEventListeners(),q.addEventListener("click",(()=>{m.resetValidation(),w.open();const e=k.getUserInfo();i.value=e.name,a.value=e.description}));const I=document.querySelector(".profile__avatar"),P=new n(".popup_type_change-profile-picture",(e=>{S.changeavatar(e).then((e=>{C.src=e.avatar,P.close()}))}));P.setEventListeners(),I.addEventListener("click",(()=>{m.resetValidation(),P.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWEsSUFBSXRGLEVBQ3JCLHNDQUNDa0IsSUFDQzRCLEVBQUkyQixhQUFhdkQsR0FDcEI4QixNQUFNQyxJQUNMZ0MsRUFBVUYsSUFBTTlCLEVBQUkvQixPQUNwQm9FLEVBQVczRixjQUliMkYsRUFBV3hGLG9CQUNYdUYsRUFBbUJySyxpQkFBaUIsU0FBUyxLQUMzQ3FHLEVBQWtCOUYsa0JBQ2xCK0osRUFBVzFGLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0gLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9wb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8gLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBvcFVwUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9wcmV2aWV3XCIpO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuZm9ybSA9IGZvcm07XG4gICAgdGhpcy5pbnB1dExpc3QgPSBbLi4udGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuYnV0dG9uID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIH0pO1xuICB9XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLmZvcm0pO1xuICB9XG4gIF9zaG93RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIH1cbiAgX2hpZGVFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgfVxuICBfY2hlY2tWYWxpZGl0eShpbnB1dCkge1xuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzIH0gPSB0aGlzLnNldHRpbmdzO1xuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShpbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0KTtcbiAgICB9XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0KSB7XG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MgfSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfVxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgY29uc3QgaXNGb3JtVmFsaWQgPSB0aGlzLmlucHV0TGlzdC5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgICBpZiAoaXNGb3JtVmFsaWQpIHtcbiAgICAgIHRoaXMuYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxufVxuIiwiXG5cblxuZXhwb3J0ICBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZSxoYW5kbGVMaWtlLGRlbGV0ZUxpa2UsIHVzZXJJZCkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGFcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID1kYXRhLmxpa2VzXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZFxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2VsZW1lbnRUZW1wbGF0ZSA9XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3Rvci5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2Jsb2NrXCIpO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XG4gICAgdGhpcy5faGFuZGxlTGlrZSA9aGFuZGxlTGlrZTtcbiAgICB0aGlzLl9kZWxldGVMaWtlID0gZGVsZXRlTGlrZTtcbiAgICBcbiAgICBcbiAgfVxuXG4gcmVtb3ZlY2FyZCgpe1xuICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKVxuIH1cblxuXG4gIGNyZWF0ZUNhcmRFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9lbGVtZW50VGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmVsZW1lbnRzX19jb3ZlclwiXG4gICAgKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYDtcbiAgICBpZiAoIHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCl7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RyYXNoXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICAvL2RlbGV0ZSBidG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RyYXNoXCIpXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUodGhpcy5faWQpXG4gICAgfSk7XG5cblxuXG5cblxuICAgY29uc3QgY291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1jb3VudGVyXCIpXG4gICBjb3VudGVyLnRleHRDb250ZW50PSB0aGlzLl9saWtlcy5sZW5ndGg7XG5cbiAgICAvL2xpa2UgYnRuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhY3RpdmVMaWtlID0gZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19fbGlrZV90eXBlX2FjdGl2ZVwiKTtcbiAgICAgICAgaWYgKGFjdGl2ZUxpa2Upe1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3VzZXJJZCwgdGhpcy5fb3duZXJJZClcbiAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKHRoaXMuX2lkKVxuICAgICAgICAgIGNvdW50ZXIudGV4dENvbnRlbnQ9IHRoaXMuX2xpa2VzLmxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICB0aGlzLl9kZWxldGVMaWtlKHRoaXMuX2lkKVxuICAgICAgICAgIGNvdW50ZXIudGV4dENvbnRlbnQ9IHRoaXMuX2xpa2VzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICBjb25zdCBsaWtlZCA9dGhpcy5fbGlrZXMuc29tZSgocGVycykgPT4gcGVycy5faWQgPT09IHRoaXMuX3VzZXJJZClcblxuICAgICBpZihsaWtlZCl7XG4gICAgICBjb25zb2xlLmxvZyhcInNvbWV0aGluZyB3b3JrXCIpXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2VcIikuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRzX19saWtlX3R5cGVfYWN0aXZlXCIpXG4gICAgIH1cblxuXG4gICAgLy9vcG5lIHByZXZpZXdcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY292ZXJcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKCB0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxuICAgICAgKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIC8vdGhpcy5faGFuZGxlRW1wdHlDbGljayA9IHRoaXMuX2hhbmRsZUVtcHR5Q2xpY2suYmluZCh0aGlzKTtcbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BwZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcHBlbmVkXCIpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcykpO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQgPT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxuICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQgID0gc3VibWl0SGFuZGxlclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIilcbiAgICAgICAgdGhpcy5fc2F2aW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZS1idXR0b25cIilcbiAgICAgICBcbiAgICB9XG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge31cbiAgICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7IGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUgfSlcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWVzXG4gICAgICAgIFxuICAgIH1cbiAgXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT57XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCAodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSlcbiAgICAgICAgICAgIHRoaXMuX3NhdmluZy50ZXh0Q29udGVudCA9XCJzYXZpbmcuLi5cIiAgXG4gICAgICAgIH0pXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKClcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpXG4gICAgICAgIHRoaXMuX3NhdmluZy50ZXh0Q29udGVudCA9XCJzYXZlXCIgIFxuICAgICAgICBcblxuICAgICAgICBcbiAgICB9XG4gICBcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3RvcilcbiAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0ICA9IHN1Ym1pdEhhbmRsZXJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpXG4gICAgICAgXG4gICAgfVxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+e1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKVxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH0pXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKClcbiAgICAgICAgXG4gICAgfVxufSIsIi8vaW1wb3J0IGF2YXRhclNyYyBmcm9tIFwiLi4vaW1hZ2VzL3Byb2ZpbGUuanBnXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL2Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCAgQ2FyZCAgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2FyZC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtIC5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvIC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aFN1Ym1pdCBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cFdpdGhTdWJtaXQuanNcIjtcbi8vLi4uLi4uLi4uLi4uLi4uRW5kIE9mIEltcG9ydCBNb2R1bHMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cblxuY29uc3QgZWxlbWVudHNQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG5jb25zdCBuYW1lQ2hhbmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiKTtcbmNvbnN0IGRlc2NyaXB0aW9uQ2hhbmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uXCJcbik7XG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RlbXBsYXRlXCIpO1xuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9wcm9maWxlLWVkZGl0b3JcIik7XG5jb25zdCBjYXJkRWRpdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2NhcmQtZWRpdG9yXCIpO1xuY29uc3QgYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2NoYW5nZS1wcm9maWxlLXBpY3R1cmVcIik7XG5jb25zdCB0cmFzaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9kZWxldGUtY2FyZFwiKTtcbmxldCB1c2VySWQgPVwiXCJcbi8vLi4uLi4uLi4uLi4uLi4uLi4uRW5kIG9mIHNlbGVjdG9ycy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc2F2ZS1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF9lcnJvclwiLFxufTtcbi8vLi4uLi4uLi4uLi4uLi5FbmQgT2Ygc2V0dGluZ3MuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHByb2ZpbGUpO1xuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgY2FyZEVkaXRvcik7XG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGF2YXRhcik7XG5jb25zdCBkZWxldGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHRyYXNoKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuZGVsZXRlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4vLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLkVuZCBvZiBmb3JtIFZhbGlkYXRvci4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9faW5mb1wiLFxuICB1c2VySm9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1Yi1pbmZvXCIsXG59KTtcbi8vLi4uLi4uLi4uLi4uLi4uLi4uLi4uLkVuZCBvZiB1c2VyIEluZm8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbigoZGF0YSk9PiAgXG4gIHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSxcbiAgICAgICB0ZW1wbGF0ZSxcbiAgICAgICAgKG5hbWUsIGxpbmspID0+IHtvcGVuUHJldmlldy5vcGVuKG5hbWUsIGxpbmspO30sIFxuICAgIChpZCkgPT4geyBcbiAgICAgIGNvbnN0IGRlbGV0ZUZvcm0gPSBuZXcgUG9wdXBXaXRoU3VibWl0KFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIiwgKCkgPT57XG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGlkKVxuICAgICAgICAudGhlbihyZXMgPT57XG4gICAgICAgICAgY2FyZC5yZW1vdmVjYXJkKClcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuZGVsZXRlRm9ybS5zZXRFdmVudExpc3RlbmVycygpXG5kZWxldGVGb3JtLm9wZW4oKVxuXG4gICAgfSxcbiAgICAoaWQpPT57XG4gICAgIGFwaS5wdXRsaWtlKGlkKS50aGVuKChpZCkgPT57XG4gICAgICAgIGNvbnNvbGUubG9nKFwibGlrZWRcIiwgaWQpXG4gICAgICB9KVxuICAgIH0sXG4gICAgKGlkKT0+e1xuICAgICBhcGkuZGVsZXRlTGlrZShpZClcbiAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRlZFwiLCBpZClcbiAgICB9LFxuICAgIHVzZXJJZCApO1xuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkRWxlbWVudCgpXG59XG4sZWxlbWVudHNQbGFjZSlcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICB0b2tlbjogXCIzYjA1OTFmNS04ZDgwLTQ4YWYtYmZiMi0xNDk5ZDUwNDUzMDRcIixcbiAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG59KTtcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKVxuLnRoZW4oKHJlcykgPT57XG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKHJlcylcbn1cbilcbi8vYWRkIG5ldyBDYXJkIHBvcFVwXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgY2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2NhcmQtZWRpdG9yXCIsIChkYXRhKSA9PiB7XG4gIGFwaS5hZGROZXdDYXJkKGRhdGEpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICBjb25zdCBhZGRDYXJkID0gbmV3IENhcmQoXG4gICAgICAgIHJlcyxcbiAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBvcGVuUHJldmlldy5vcGVuKGRhdGEpXG4gICAgICAgIH0sXG4gICAgICAgIChpZCkgPT57Y29uc3QgZGVsZXRlRm9ybSA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoXCIucG9wdXBfdHlwZV9kZWxldGUtY2FyZFwiLCAoKSA9PntcbiAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChpZClcbiAgICAgICAgICAudGhlbihyZXMgPT57XG4gICAgICAgICAgICBhZGRDYXJkLnJlbW92ZWNhcmQoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICBkZWxldGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKClcbiAgZGVsZXRlRm9ybS5vcGVuKCl9KTtcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShhZGRDYXJkLmNyZWF0ZUNhcmRFbGVtZW50KCkpOyAgIFxuICB9LFxuICB1c2VySWQpO1xuICBjYXJkRm9ybS5jbG9zZSgpXG59KTtcbmNhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBjYXJkRm9ybS5vcGVuKCk7XG59KTtcblxuLy8gY2FyZCBwcmV2aWV3IHBvcHVwXG5jb25zdCBvcGVuUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX3ByZXZpZXdcIik7XG5vcGVuUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xuLy8uLi4uLi4uLi4uLi4uLi4uLmVuZCBvZiBDYXJkcy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuXG4vL0dldCBwcm9maWxlIGluZm9cbmxldCBhdmF0YXJJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtYXZhdGFyXCIpO1xuXG5hcGkuZ2V0SW5pdGlhbFByb2ZpbGUoKS50aGVuKChwcm9maWxlKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogcHJvZmlsZS5uYW1lLCBhYm91dDogcHJvZmlsZS5hYm91dCB9KTtcbmF2YXRhckltZy5zcmMgPSBwcm9maWxlLmF2YXRhclxudXNlcklkID0gcHJvZmlsZS5faWRcbn0pO1xuLy9zZXQgcHJvZmlsZSBpbmZvXG5jb25zdCBvcGVuUHJvZmlsZUVkaXRvckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfcHJvZmlsZS1lZGRpdG9yXCIsIChwcm9maWxlKSA9PiB7XG4gIGFwaS5zZXRJbml0aWFsUHJvZmlsZShwcm9maWxlKS50aGVuKChwcm9maWxlKT0+e1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGUpO1xuICAgIHByb2ZpbGVGb3JtLmNsb3NlKClcbiB9KVxuXG59KTtcbnByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5vcGVuUHJvZmlsZUVkaXRvckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZUZvcm0ub3BlbigpO1xuICBjb25zdCBkYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUNoYW5nZXIudmFsdWUgPSBkYXRhLm5hbWU7XG4gIGRlc2NyaXB0aW9uQ2hhbmdlci52YWx1ZSA9IGRhdGEuZGVzY3JpcHRpb247XG59KTtcblxuLy8gY2hhbmdlIGF2YXRhciBwb3B1cFxuY29uc3QgY2hhbmdlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBhdmF0YXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiLnBvcHVwX3R5cGVfY2hhbmdlLXByb2ZpbGUtcGljdHVyZVwiLFxuICAoYXZhdGFyKSA9PiB7XG4gICAgYXBpLmNoYW5nZWF2YXRhcihhdmF0YXIpXG4udGhlbigocmVzKT0+e1xuICBhdmF0YXJJbWcuc3JjID0gcmVzLmF2YXRhclxuICBhdmF0YXJGb3JtLmNsb3NlKClcbn0pXG4gIH1cbik7XG5hdmF0YXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jaGFuZ2VBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGF2YXRhckZvcm0ub3BlbigpO1xufSk7XG4vLy4uLi4uLi4uLi4uLi4uLi4uLmVuZCBvZiBwcm9maWxlLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG5cbiIsIiBleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3Ioe3VzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3Rvcn0pe1xuICAgICAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3RvcilcbiAgICAgICAgdGhpcy5fdXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKVxuICAgICAgIFxuICAgIH1cbiAgICBnZXRVc2VySW5mbygpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnRcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRVc2VySW5mbyh7bmFtZSwgYWJvdXQ6IGFib3V0fSl7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZVxuICAgICAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gYWJvdXRcblxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3Ipe1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9cmVuZGVyZXJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3JcblxuICAgIH1cbiAgICBhZGRJdGVtKGVsZW1lbnQpe1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxuICAgIH1cbiAgICByZW5kZXJJdGVtcyhkYXRhKXtcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChlbGVtZW50ID0+IHRoaXMuYWRkSXRlbSggdGhpcy5fcmVuZGVyZXIoZWxlbWVudCkpKSAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgXG4gICAgfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xudGhpcy5fdXJsID0gb3B0aW9ucy5iYXNlVXJsO1xudGhpcy5fdG9rZW4gPSBvcHRpb25zLnRva2VuO1xuICAgIH1cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgICAgIGhlYWRlcnM6IFxuICAgICAgICAgIHthdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbn1cbiAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgIH0gXG4gICAgICBhZGROZXdDYXJkKGRhdGEpe1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiBcbiAgICAgICAgICB7YXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sICdDb250ZW50LVR5cGUnOiBcImFwcGxpY2F0aW9uL2pzb25cIn0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkgKGRhdGEpXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9KVxuICAgICAgfSBcblxuICAgICAgZGVsZXRlQ2FyZChjYXJkSWQpe1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0gYCx7XG4gICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgIGhlYWRlcnM6IHthdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbn1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4ge3Jlc31cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHB1dGxpa2UoY2FyZElkKXtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9IGAse1xuICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICBoZWFkZXJzOiB7YXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sJ0NvbnRlbnQtVHlwZSc6IFwiYXBwbGljYXRpb24vanNvblwifSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4ge3Jlc31cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBkZWxldGVMaWtlKGNhcmRJZCl7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfSBgLHtcbiAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgaGVhZGVyczoge2F1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLCdDb250ZW50LVR5cGUnOiBcImFwcGxpY2F0aW9uL2pzb25cIn0sXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHtyZXN9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gIC8vLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5FbmQgb2YgY2FyZHMgYXBpYHMuLi4uLi4uLi4uLi4uLi4uLi4uLlxuXG4gICAgZ2V0SW5pdGlhbFByb2ZpbGUoKXtcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgICBoZWFkZXJzOiBcbiAgICAgICAge2F1dGhvcml6YXRpb246IHRoaXMuX3Rva2VufVxuICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pXG4gICAgfVxuICBzZXRJbml0aWFsUHJvZmlsZShkYXRhKXtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHthdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbiwgICdDb250ZW50LVR5cGUnOiBcImFwcGxpY2F0aW9uL2pzb25cIn0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7bmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5hYm91dH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICB9XG4gIGNoYW5nZWF2YXRhcihhdmF0YXIpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhciBgLHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHthdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbiwgJ0NvbnRlbnQtVHlwZSc6IFwiYXBwbGljYXRpb24vanNvblwifSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhcilcbiAgICB9KVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhhdmF0YXIpXG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbiAgICB9KVxuICB9XG5cblxuXG4vLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uZW5kIG9mIGZpbGUuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gIH0gXG5cblxuICBcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9wb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG4gICAgICAgIHRoaXMuX3BvcHVwUHJldmlldyA9IFwiLnBvcHVwX19wcmV2aWV3XCJcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgIFxuICAgIH1cbiAgICBcblxuICAgIG9wZW4odGV4dCwgbGluaykge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFByZXZpZXcpLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wcmV2aWV3LXRleHRcIikudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFByZXZpZXcpLmFsdCA9IHRleHQ7XG4gICAgICAgIHN1cGVyLm9wZW4oKVxuICAgIH1cbn0iXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsImlucHV0TGlzdCIsImZvckVhY2giLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJidXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInJlc2V0VmFsaWRhdGlvbiIsIl9oaWRlRXJyb3IiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJpbnB1dEVycm9yQ2xhc3MiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3Nob3dFcnJvciIsImlkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJhZGQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZXZlcnkiLCJkaXNhYmxlZCIsIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZSIsImhhbmRsZUxpa2UiLCJkZWxldGVMaWtlIiwidXNlcklkIiwiX25hbWUiLCJuYW1lIiwiX2RhdGEiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfaWQiLCJfdXNlcklkIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfZWxlbWVudFRlbXBsYXRlIiwiY29udGVudCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZUxpa2UiLCJfZGVsZXRlTGlrZSIsInJlbW92ZWNhcmQiLCJfZWxlbWVudCIsImNyZWF0ZUNhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJkaXNwbGF5IiwiY291bnRlciIsImxlbmd0aCIsImV2ZW50IiwidGFyZ2V0IiwidG9nZ2xlIiwiY29uc29sZSIsImxvZyIsInNvbWUiLCJwZXJzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJldnQiLCJrZXkiLCJjbG9zZSIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybSIsIl9zYXZpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwicmVzZXQiLCJQb3B1cFdpdGhTdWJtaXQiLCJlbGVtZW50c1BsYWNlIiwibmFtZUNoYW5nZXIiLCJkZXNjcmlwdGlvbkNoYW5nZXIiLCJ0ZW1wbGF0ZSIsInByb2ZpbGUiLCJjYXJkRWRpdG9yIiwiYXZhdGFyIiwidHJhc2giLCJmb3JtU2VsZWN0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsImRlbGV0ZUZvcm1WYWxpZGF0b3IiLCJ1c2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsImFib3V0IiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiY2FyZCIsIm9wZW5QcmV2aWV3IiwiZGVsZXRlRm9ybSIsImFwaSIsImRlbGV0ZUNhcmQiLCJ0aGVuIiwicmVzIiwicHV0bGlrZSIsIm9wdGlvbnMiLCJfdXJsIiwiYmFzZVVybCIsIl90b2tlbiIsInRva2VuIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJhZGROZXdDYXJkIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJnZXRJbml0aWFsUHJvZmlsZSIsInNldEluaXRpYWxQcm9maWxlIiwiY2hhbmdlYXZhdGFyIiwiYWRkQ2FyZEJ1dHRvbiIsImNhcmRGb3JtIiwiYWRkQ2FyZCIsIl9wb3B1cFByZXZpZXciLCJ0ZXh0Iiwic3JjIiwiYWx0IiwiYXZhdGFySW1nIiwiZ2V0RWxlbWVudEJ5SWQiLCJvcGVuUHJvZmlsZUVkaXRvckJ1dHRvbiIsInByb2ZpbGVGb3JtIiwiY2hhbmdlQXZhdGFyQnV0dG9uIiwiYXZhdGFyRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=