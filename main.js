!function(){"use strict";document.querySelector(".popup_type_preview");class e{constructor(e,t){var s,o;o=()=>{this.inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this.toggleButtonState()}))}))},(s="_setEventListeners")in this?Object.defineProperty(this,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[s]=o,this.settings=e,this.form=t,this.inputList=[...this.form.querySelectorAll(e.inputSelector)],this.button=this.form.querySelector(e.submitButtonSelector),this.isFormValid=!0}resetValidation(){this.inputList.forEach((e=>{this._hideError(e),e.classList.remove(this.settings.inputErrorClass)})),this.isFormValid=!0}enableValidation(){this.form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this.form)}_showError(e){this.isFormValid||(this.form.querySelector("#".concat(e.id,"-error")).textContent=e.validationMessage)}_hideError(e){this.isFormValid||(this.form.querySelector("#".concat(e.id,"-error")).textContent=" ")}_checkValidity(e){const{inputErrorClass:t}=this.settings;e.validity.valid?(e.classList.remove(t),this._hideError(e)):(e.classList.add(t),this._showError(e))}_checkValidity(e){const{inputErrorClass:t}=this.settings;e.validity.valid?(e.classList.remove(t),this._hideError(e)):(e.classList.add(t),this._showError(e))}toggleButtonState(){const{inactiveButtonClass:e}=this.settings;this.isFormValid=this.inputList.every((e=>e.validity.valid)),this.isFormValid?(this.button.disabled=!1,this.button.classList.remove(e)):(this.button.disabled=!0,this.button.classList.add(e))}}class t{constructor(e,t,s,o,n,r,i){this._name=e.name,this._data=e,this._link=e.link,this._likes=e.likes,this._ownerId=e.owner._id,this._userId=i,this._id=e._id,this._templateSelector=t,this._elementTemplate=this._templateSelector.content.querySelector(".elements__block"),this._handleCardClick=s,this._handleDelete=o,this._handleLike=n,this._deleteLike=r}removecard(){this._element.remove()}createCardElement(){this._element=this._elementTemplate.cloneNode(!0),this._element.querySelector(".elements__title").textContent=this._name,this._element.querySelector(".elements__cover").style.backgroundImage="url(".concat(this._link,")"),this._ownerId!==this._userId&&(this._element.querySelector(".elements__trash").style.display="none"),this._element.querySelector(".elements__trash").addEventListener("click",(()=>{this._handleDelete(this._id)}));const e=this._element.querySelector(".elements__like-counter");return e.textContent=this._likes.length,this._element.querySelector(".elements__like").addEventListener("click",(t=>{t.target.classList.toggle("elements__like_type_active")?(console.log(this._userId,this._ownerId),this._handleLike(this._id),e.textContent=this._likes.length+1):(this._deleteLike(this._id),e.textContent=this._likes.length)})),this._likes.some((e=>e._id===this._userId))&&this._element.querySelector(".elements__like").classList.add("elements__like_type_active"),this._element.querySelector(".elements__cover").addEventListener("click",(()=>this._handleCardClick(this._name,this._link))),this._element}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("popup_oppened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_oppened"),document.removeEventListener("keyup",this._handleEscClose)}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target==e.currentTarget&&this.close()}))}}class o extends s{constructor(e,t,s,o){super(e),this._handleSubmit=o,this._form=this._popupElement.querySelector(".popup__form"),this._submitButton=this._popupElement.querySelector(".popup__save-button"),this._buttonText=t,this._loadingButtonText=s}_getInputValues(){const e=[...this._form.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())})),super.setEventListeners()}close(){super.close(),this._form.reset()}showLoading(){console.log("button-text",this._loadingButtonText),this._submitButton.textContent=this._loadingButtonText}hideLoading(){console.log("button-text",this._buttonText),this._submitButton.textContent=this._buttonText}}class n extends s{constructor(e,t){super(e),this._submitHandler=t,this._form=this._popupElement.querySelector(".popup__form")}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(),this.close()})),super.setEventListeners()}}const r=document.querySelector(".elements"),i=document.querySelector(".popup__input_type_name"),a=document.querySelector(".popup__input_type_description"),l=document.querySelector(".elements__template"),c=document.querySelector(".popup_type_profile-edditor"),u=document.querySelector(".popup_type_card-editor"),h=document.querySelector(".popup_type_change-profile-picture");document.querySelector(".popup_type_delete-card");let d="";const p={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_error"},_=new e(p,c),m=new e(p,u),y=new e(p,h);_.enableValidation(),m.enableValidation(),y.enableValidation();const v=new class{constructor(e){let{userNameSelector:t,userJobSelector:s}=e;this._userName=document.querySelector(t),this._userJob=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,description:this._userJob.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._userName.textContent=t,this._userJob.textContent=s}}({userNameSelector:".profile__info",userJobSelector:".profile__sub-info"});function E(e){const s=new t(e,l,((e,t)=>{L.open(e,t)}),(e=>{const t=new n(".popup_type_delete-card",(()=>{k.deleteCard(e).then((e=>{s.removecard(e)}))}));t.setEventListeners(),t.open()}),(e=>{k.adLike(e).then((e=>{console.log("liked",e)}))}),(e=>{k.deleteLike(e),console.log("deleted",e)}),d);return s.createCardElement()}const f=new class{constructor(e,t){this._renderer=e,this._container=t}addItem(e){this._container.prepend(e)}renderItems(e){e.forEach((e=>this.addItem(this._renderer(e))))}}((e=>E(e)),r),k=new class{constructor(e){this._url=e.baseUrl,this._token=e.token}_getResponceData(e){}getInitialCards(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._token}}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}addNewCard(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}deleteCard(e){return fetch("".concat(this._url,"/cards/").concat(e," "),{method:"DELETE",headers:{authorization:this._token}}).then((e=>e.ok?{res:e}:Promise.reject("Error: ".concat(e.status))))}adLike(e){return fetch("".concat(this._url,"/cards/likes/").concat(e," "),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((e=>e.ok?{res:e}:Promise.reject("Error: ".concat(e.status))))}deleteLike(e){return fetch("".concat(this._url,"/cards/likes/").concat(e," "),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((e=>e.ok?{res:e}:Promise.reject("Error: ".concat(e.status))))}getProfile(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._token}}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}setInitialProfile(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}changeavatar(e){return fetch("".concat(this._url,"/users/me/avatar "),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",token:"3b0591f5-8d80-48af-bfb2-1499d5045304","Content-Type":"application/json"});k.getInitialCards().then((e=>{f.renderItems(e)}));const b=document.querySelector(".profile__add-button"),g=new o(".popup_type_card-editor","Create","Creating...",(e=>{g.showLoading(),k.addNewCard(e).then((e=>{f.addItem(E(e))})).catch((()=>console.log("error"))).finally((()=>{g.hideLoading(),g.close()}))}));g.setEventListeners(),b.addEventListener("click",(()=>{_.resetValidation(),g.open()}));const L=new class extends s{constructor(e){super(e),this._popupPreview=".popup__preview"}open(e,t){this._popupElement.querySelector(this._popupPreview).src=t,this._popupElement.querySelector(".popup__preview-text").textContent=e,this._popupElement.querySelector(this._popupPreview).alt=e,super.open()}}(".popup_type_preview");L.setEventListeners(),k.getProfile().then((e=>{v.setUserInfo({name:e.name,about:e.about}),S.src=e.avatar,d=e._id}));let S=document.getElementById("profile-avatar");const C=document.querySelector(".profile__edit-button"),q=new o(".popup_type_profile-edditor","save","saving...",(e=>{q.showLoading(),k.setInitialProfile(e).then((e=>{v.setUserInfo(e)})).catch((()=>console.log("error"))).finally((()=>{q.hideLoading(),q.close()}))}));q.setEventListeners(),C.addEventListener("click",(()=>{_.resetValidation(),q.open();const e=v.getUserInfo();i.value=e.name,a.value=e.description}));const w=document.querySelector(".profile__avatar-middle"),x=new o(".popup_type_change-profile-picture","save","saving...",(e=>{x.showLoading(),k.changeavatar(e).then((e=>{S.src=e.avatar})).catch((()=>console.log(error))).finally((()=>{x.hideLoading(),x.close()}))}));x.setEventListeners(),w.addEventListener("click",(()=>{y.resetValidation(),x.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjdLLGlCQUFpQixTQUFTLEtBQ2hENkcsRUFBa0JyRyxrQkFDbEJzSyxFQUFZakcsT0FDWixNQUFNakQsRUFBT29GLEVBQVNLLGNBQ3RCZixFQUFZUixNQUFRbEUsRUFBS1EsS0FDekJtRSxFQUFtQlQsTUFBUWxFLEVBQUswRixlQUlsQyxNQUFNeUQsRUFBcUJ6TCxTQUFTQyxjQUFjLDJCQUM1Q3lMLEVBQWEsSUFBSS9GLEVBQ3JCLHFDQUNBLE9BQ0EsYUFFQzBCLElBQ0NxRSxFQUFXaEYsY0FDWDZCLEVBQ0dxQyxhQUFhdkQsR0FDYm9CLE1BQU1DLElBQ0wyQyxFQUFVRixJQUFNekMsRUFBSXJCLFVBRXJCMEQsT0FBTSxJQUFLcEcsUUFBUUMsSUFBSStHLFNBQ3ZCWCxTQUFRLEtBQ1BVLEVBQVcvRSxjQUNYK0UsRUFBV3BHLGNBSW5Cb0csRUFBV2pHLG9CQUNYZ0csRUFBbUIvSyxpQkFBaUIsU0FBUyxLQUMzQytHLEVBQW9Cdkcsa0JBQ3BCd0ssRUFBV25HLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0gLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9wb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8gLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBvcFVwUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9wcmV2aWV3XCIpO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuZm9ybSA9IGZvcm07XG4gICAgdGhpcy5pbnB1dExpc3QgPSBbLi4udGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuYnV0dG9uID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuaXNGb3JtVmFsaWQgPSB0cnVlO1xuICB9XG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIH0pO1xuICAgIHRoaXMuaXNGb3JtVmFsaWQgPSB0cnVlO1xuICB9XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLmZvcm0pO1xuICB9XG4gIF9zaG93RXJyb3IoaW5wdXQpIHtcbiAgICBpZighdGhpcy5pc0Zvcm1WYWxpZCkge1xuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgfVxuICB9XG4gIF9oaWRlRXJyb3IoaW5wdXQpIHtcbiAgICBpZighdGhpcy5pc0Zvcm1WYWxpZCkge1xuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCIgXCI7ICAgICAgXG4gICAgfVxuICB9XG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0KSB7XG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MgfSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXQpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXQpIHtcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcyB9ID0gdGhpcy5zZXR0aW5ncztcbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgIHRoaXMuX3Nob3dFcnJvcihpbnB1dCk7XG4gICAgfVxuICB9XG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5zZXR0aW5ncztcbiAgICB0aGlzLmlzRm9ybVZhbGlkID0gdGhpcy5pbnB1dExpc3QuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCk7XG4gICAgaWYgKHRoaXMuaXNGb3JtVmFsaWQpIHtcbiAgICAgIHRoaXMuYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlLFxuICAgIGhhbmRsZUxpa2UsXG4gICAgZGVsZXRlTGlrZSxcbiAgICB1c2VySWRcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5fZWxlbWVudFRlbXBsYXRlID1cbiAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19ibG9ja1wiKTtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xuICAgIHRoaXMuX2RlbGV0ZUxpa2UgPSBkZWxldGVMaWtlO1xuICB9XG4gIHJlbW92ZWNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuICBjcmVhdGVDYXJkRWxlbWVudCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZWxlbWVudFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5lbGVtZW50c19fY292ZXJcIlxuICAgICkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX190cmFzaFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgLy9kZWxldGUgYnRuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RyYXNoXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlKHRoaXMuX2lkKTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgY291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1jb3VudGVyXCIpO1xuICAgIGNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG5cbiAgICAvL2xpa2UgYnRuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUxpa2UgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcbiAgICAgICAgICBcImVsZW1lbnRzX19saWtlX3R5cGVfYWN0aXZlXCJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGFjdGl2ZUxpa2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl91c2VySWQsIHRoaXMuX293bmVySWQpO1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcy5faWQpO1xuICAgICAgICAgIGNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGggKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2RlbGV0ZUxpa2UodGhpcy5faWQpO1xuICAgICAgICAgIGNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIGNvbnN0IGxpa2VkID0gdGhpcy5fbGlrZXMuc29tZSgocGVycykgPT4gcGVycy5faWQgPT09IHRoaXMuX3VzZXJJZCk7XG5cbiAgICBpZiAobGlrZWQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2VcIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fbGlrZV90eXBlX2FjdGl2ZVwiKTtcbiAgICB9XG5cblxuICAgIC8vb3BuZSBwcmV2aWV3XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NvdmVyXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxuICAgICAgKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgXG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0ID09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBidXR0b25UZXh0LCBsb2FkaW5nQnV0dG9uVGV4dCwgaGFuZGxlU3VibWl0KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCAgPSBoYW5kbGVTdWJtaXRcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbj0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3NhdmUtYnV0dG9uXCIpXG4gICAgICAgIHRoaXMuX2J1dHRvblRleHQgPSBidXR0b25UZXh0XG4gICAgICAgIHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0ID0gbG9hZGluZ0J1dHRvblRleHRcbiAgICAgICAgXG4gICAgICAgXG4gICAgfVxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIildXG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9XG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4geyBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlIH0pXG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlc1xuICAgICAgICBcbiAgICB9XG4gIFxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+e1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQgKHRoaXMuX2dldElucHV0VmFsdWVzKCkpXG4gICAgICAgICAgICBcbiAgICAgICAgfSlcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKVxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KClcbiAgICAgICAgXG5cbn1cbiAgICAgICAgc2hvd0xvYWRpbmcoKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYnV0dG9uLXRleHRcIiwgdGhpcy5fbG9hZGluZ0J1dHRvblRleHQpXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nQnV0dG9uVGV4dFxuICAgICAgICB9XG4gICAgICAgIGhpZGVMb2FkaW5nKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImJ1dHRvbi10ZXh0XCIsIHRoaXMuX2J1dHRvblRleHQpXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25UZXh0XG4gICAgICAgIH1cbiAgIFxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9wb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxuICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyICA9IHN1Ym1pdEhhbmRsZXJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpXG4gICAgICAgXG4gICAgfVxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+e1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKClcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9KVxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpXG4gICAgfVxuICBcbn0iLCIvL2ltcG9ydCBhdmF0YXJTcmMgZnJvbSBcIi4uL2ltYWdlcy9wcm9maWxlLmpwZ1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9mb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9jYXJkLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0gLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8gLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9zZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoU3VibWl0IGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwV2l0aFN1Ym1pdC5qc1wiO1xuLy8uLi4uLi4uLi4uLi4uLi5FbmQgT2YgSW1wb3J0IE1vZHVscy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuXG5jb25zdCBlbGVtZW50c1BsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcbmNvbnN0IG5hbWVDaGFuZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCIpO1xuY29uc3QgZGVzY3JpcHRpb25DaGFuZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxuKTtcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGVtcGxhdGVcIik7XG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3Byb2ZpbGUtZWRkaXRvclwiKTtcbmNvbnN0IGNhcmRFZGl0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfY2FyZC1lZGl0b3JcIik7XG5jb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfY2hhbmdlLXByb2ZpbGUtcGljdHVyZVwiKTtcbmNvbnN0IHRyYXNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2RlbGV0ZS1jYXJkXCIpO1xubGV0IHVzZXJJZCA9IFwiXCI7XG4vLy4uLi4uLi4uLi4uLi4uLi4uLkVuZCBvZiBzZWxlY3RvcnMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbmNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfZXJyb3JcIixcbn07XG4vLy4uLi4uLi4uLi4uLi4uRW5kIE9mIHNldHRpbmdzLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwcm9maWxlKTtcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGNhcmRFZGl0b3IpO1xuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhdmF0YXIpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4vLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLkVuZCBvZiBmb3JtIFZhbGlkYXRvci4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9faW5mb1wiLFxuICB1c2VySm9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1Yi1pbmZvXCIsXG59KTtcbi8vLi4uLi4uLi4uLi4uLi4uLi4uLi4uLkVuZCBvZiB1c2VyIEluZm8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBkYXRhLFxuICAgIHRlbXBsYXRlLFxuICAgIChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICBvcGVuUHJldmlldy5vcGVuKG5hbWUsIGxpbmspO1xuICAgIH0sXG4gICAgKGlkKSA9PiB7XG4gICAgICBjb25zdCBkZWxldGVGb3JtID0gbmV3IFBvcHVwV2l0aFN1Ym1pdChcIi5wb3B1cF90eXBlX2RlbGV0ZS1jYXJkXCIsICgpID0+IHtcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoaWQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGNhcmQucmVtb3ZlY2FyZChyZXMpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgZGVsZXRlRm9ybS5vcGVuKCk7XG4gICAgfSxcbiAgICAoaWQpID0+IHtcbiAgICAgIGFwaS5hZExpa2UoaWQpLnRoZW4oKGlkKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibGlrZWRcIiwgaWQpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAoaWQpID0+IHtcbiAgICAgIGFwaS5kZWxldGVMaWtlKGlkKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRlZFwiLCBpZCk7XG4gICAgfSxcbiAgICB1c2VySWRcbiAgKTtcblxuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkRWxlbWVudCgpO1xufVxuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKChkYXRhKSA9PiB7XG4gIHJldHVybiBjcmVhdGVDYXJkKGRhdGEpO1xufSwgZWxlbWVudHNQbGFjZSk7XG4vLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICB0b2tlbjogXCIzYjA1OTFmNS04ZDgwLTQ4YWYtYmZiMi0xNDk5ZDUwNDUzMDRcIixcbiAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG59KTtcbi8vaW5pdGlhbGl6YXRpb24gb2YgY2FyZHNcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXMpID0+IHtcbiAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMocmVzKTtcbn0pO1xuXG4vL2FkZCBuZXcgQ2FyZCBwb3BVcFxuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiLnBvcHVwX3R5cGVfY2FyZC1lZGl0b3JcIixcbiAgXCJDcmVhdGVcIixcbiAgXCJDcmVhdGluZy4uLlwiLFxuICAoZGF0YSkgPT4ge1xuICAgIGNhcmRGb3JtLnNob3dMb2FkaW5nKCk7XG4gICAgYXBpXG4gICAgICAuYWRkTmV3Q2FyZChkYXRhKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IGNvbnNvbGUubG9nKFwiZXJyb3JcIikpXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGNhcmRGb3JtLmhpZGVMb2FkaW5nKCk7XG4gICAgICAgIGNhcmRGb3JtLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgfVxuKTtcbmNhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBjYXJkRm9ybS5vcGVuKCk7XG59KTtcblxuLy8gY2FyZCBwcmV2aWV3IHBvcHVwXG5jb25zdCBvcGVuUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX3ByZXZpZXdcIik7XG5vcGVuUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xuLy8uLi4uLi4uLi4uLi4uLi4uLmVuZCBvZiBDYXJkcy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuXG4vL0dldCBwcm9maWxlIGluZm9cblxuYXBpLmdldFByb2ZpbGUoKS50aGVuKChwcm9maWxlKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogcHJvZmlsZS5uYW1lLCBhYm91dDogcHJvZmlsZS5hYm91dCB9KTtcbiAgYXZhdGFySW1nLnNyYyA9IHByb2ZpbGUuYXZhdGFyO1xuICB1c2VySWQgPSBwcm9maWxlLl9pZDtcbn0pO1xuLy9zZXQgcHJvZmlsZSBpbmZvXG5sZXQgYXZhdGFySW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWF2YXRhclwiKTtcbmNvbnN0IG9wZW5Qcm9maWxlRWRpdG9yQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiLnBvcHVwX3R5cGVfcHJvZmlsZS1lZGRpdG9yXCIsXG4gIFwic2F2ZVwiLFxuICBcInNhdmluZy4uLlwiLFxuICAocHJvZmlsZSkgPT4ge1xuICAgIHByb2ZpbGVGb3JtLnNob3dMb2FkaW5nKCk7XG4gICAgYXBpXG4gICAgICAuc2V0SW5pdGlhbFByb2ZpbGUocHJvZmlsZSlcbiAgICAgIC50aGVuKChwcm9maWxlKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGUpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiBjb25zb2xlLmxvZyhcImVycm9yXCIpKVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwcm9maWxlRm9ybS5oaWRlTG9hZGluZygpO1xuICAgICAgICBwcm9maWxlRm9ybS5jbG9zZSgpO1xuICAgICAgfSk7XG4gIH1cbik7XG5wcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xub3BlblByb2ZpbGVFZGl0b3JCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVGb3JtLm9wZW4oKTtcbiAgY29uc3QgZGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVDaGFuZ2VyLnZhbHVlID0gZGF0YS5uYW1lO1xuICBkZXNjcmlwdGlvbkNoYW5nZXIudmFsdWUgPSBkYXRhLmRlc2NyaXB0aW9uO1xufSk7XG5cbi8vIGNoYW5nZSBhdmF0YXIgcG9wdXBcbmNvbnN0IGNoYW5nZUF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLW1pZGRsZVwiKTtcbmNvbnN0IGF2YXRhckZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIucG9wdXBfdHlwZV9jaGFuZ2UtcHJvZmlsZS1waWN0dXJlXCIsXG4gIFwic2F2ZVwiLFxuICBcInNhdmluZy4uLlwiLFxuXG4gIChhdmF0YXIpID0+IHtcbiAgICBhdmF0YXJGb3JtLnNob3dMb2FkaW5nKClcbiAgICBhcGlcbiAgICAgIC5jaGFuZ2VhdmF0YXIoYXZhdGFyKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBhdmF0YXJJbWcuc3JjID0gcmVzLmF2YXRhcjtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKCk9PiBjb25zb2xlLmxvZyhlcnJvcikpXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGF2YXRhckZvcm0uaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgYXZhdGFyRm9ybS5jbG9zZSgpO1xuICAgICAgfSk7XG4gIH1cbik7XG5hdmF0YXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jaGFuZ2VBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgYXZhdGFyRm9ybS5vcGVuKCk7XG59KTtcblxuLy8uLi4uLi4uLi4uLi4uLi4uLi5lbmQgb2YgcHJvZmlsZS4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuIiwiIGV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7dXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yfSl7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKVxuICAgICAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpXG4gICAgICAgXG4gICAgfVxuICAgIGdldFVzZXJJbmZvKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudFxuICAgICAgICB9XG4gICAgfVxuICAgIHNldFVzZXJJbmZvKHtuYW1lLCBhYm91dDogYWJvdXR9KXtcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lXG4gICAgICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBhYm91dFxuXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBjb250YWluZXJTZWxlY3Rvcil7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID1yZW5kZXJlclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvclxuXG4gICAgfVxuICAgIGFkZEl0ZW0oZWxlbWVudCl7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXG4gICAgfVxuICAgIHJlbmRlckl0ZW1zKGRhdGEpe1xuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4gdGhpcy5hZGRJdGVtKCB0aGlzLl9yZW5kZXJlcihlbGVtZW50KSkpICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBcbiAgICB9IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG50aGlzLl91cmwgPSBvcHRpb25zLmJhc2VVcmw7XG50aGlzLl90b2tlbiA9IG9wdGlvbnMudG9rZW47XG4gICAgfVxuICAgIF9nZXRSZXNwb25jZURhdGEocmVzKXt9XG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICBoZWFkZXJzOiBcbiAgICAgICAgICB7YXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW59XG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICB9IFxuICAgICAgYWRkTmV3Q2FyZChkYXRhKXtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogXG4gICAgICAgICAge2F1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLCAnQ29udGVudC1UeXBlJzogXCJhcHBsaWNhdGlvbi9qc29uXCJ9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5IChkYXRhKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfSlcbiAgICAgIH0gXG5cbiAgICAgIGRlbGV0ZUNhcmQoY2FyZElkKXtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9IGAse1xuICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICBoZWFkZXJzOiB7YXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW59XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHtyZXN9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgYWRMaWtlKGNhcmRJZCl7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfSBgLHtcbiAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgaGVhZGVyczoge2F1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLCdDb250ZW50LVR5cGUnOiBcImFwcGxpY2F0aW9uL2pzb25cIn0sXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHtyZXN9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZGVsZXRlTGlrZShjYXJkSWQpe1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH0gYCx7XG4gICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgIGhlYWRlcnM6IHthdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbiwnQ29udGVudC1UeXBlJzogXCJhcHBsaWNhdGlvbi9qc29uXCJ9LFxuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiB7cmVzfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIFxuICAvLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uRW5kIG9mIGNhcmRzIGFwaWBzLi4uLi4uLi4uLi4uLi4uLi4uLi5cblxuICAgIGdldFByb2ZpbGUoKXtcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgICBoZWFkZXJzOiBcbiAgICAgICAge2F1dGhvcml6YXRpb246IHRoaXMuX3Rva2VufVxuICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pXG4gICAgfVxuICBzZXRJbml0aWFsUHJvZmlsZShkYXRhKXtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHthdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbiwgICdDb250ZW50LVR5cGUnOiBcImFwcGxpY2F0aW9uL2pzb25cIn0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7bmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5hYm91dH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICB9XG4gIGNoYW5nZWF2YXRhcihhdmF0YXIpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhciBgLHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHthdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbiwgJ0NvbnRlbnQtVHlwZSc6IFwiYXBwbGljYXRpb24vanNvblwifSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhcilcbiAgICB9KVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpXG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbiAgICB9KVxuICB9XG5cblxuXG4vLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uZW5kIG9mIGZpbGUuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gIH0gXG5cblxuICBcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9wb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG4gICAgICAgIHRoaXMuX3BvcHVwUHJldmlldyA9IFwiLnBvcHVwX19wcmV2aWV3XCJcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgIFxuICAgIH1cbiAgICBcblxuICAgIG9wZW4odGV4dCwgbGluaykge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFByZXZpZXcpLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wcmV2aWV3LXRleHRcIikudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFByZXZpZXcpLmFsdCA9IHRleHQ7XG4gICAgICAgIHN1cGVyLm9wZW4oKVxuICAgIH1cbn0iXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsImlucHV0TGlzdCIsImZvckVhY2giLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJidXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlzRm9ybVZhbGlkIiwicmVzZXRWYWxpZGF0aW9uIiwiX2hpZGVFcnJvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImlucHV0RXJyb3JDbGFzcyIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfc2hvd0Vycm9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsImFkZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJldmVyeSIsImRpc2FibGVkIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlIiwiaGFuZGxlTGlrZSIsImRlbGV0ZUxpa2UiLCJ1c2VySWQiLCJfbmFtZSIsIm5hbWUiLCJfZGF0YSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl91c2VySWQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9lbGVtZW50VGVtcGxhdGUiLCJjb250ZW50IiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlTGlrZSIsIl9kZWxldGVMaWtlIiwicmVtb3ZlY2FyZCIsIl9lbGVtZW50IiwiY3JlYXRlQ2FyZEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImRpc3BsYXkiLCJjb3VudGVyIiwibGVuZ3RoIiwiZXZlbnQiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJjb25zb2xlIiwibG9nIiwic29tZSIsInBlcnMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImV2dCIsImtleSIsImNsb3NlIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiYnV0dG9uVGV4dCIsImxvYWRpbmdCdXR0b25UZXh0IiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiX2J1dHRvblRleHQiLCJfbG9hZGluZ0J1dHRvblRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwicmVzZXQiLCJzaG93TG9hZGluZyIsImhpZGVMb2FkaW5nIiwiUG9wdXBXaXRoU3VibWl0Iiwic3VibWl0SGFuZGxlciIsIl9zdWJtaXRIYW5kbGVyIiwiZWxlbWVudHNQbGFjZSIsIm5hbWVDaGFuZ2VyIiwiZGVzY3JpcHRpb25DaGFuZ2VyIiwidGVtcGxhdGUiLCJwcm9maWxlIiwiY2FyZEVkaXRvciIsImF2YXRhciIsImZvcm1TZWxlY3RvciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwidXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwiX3VzZXJOYW1lIiwiX3VzZXJKb2IiLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJhYm91dCIsImNyZWF0ZUNhcmQiLCJjYXJkIiwib3BlblByZXZpZXciLCJkZWxldGVGb3JtIiwiYXBpIiwiZGVsZXRlQ2FyZCIsInRoZW4iLCJyZXMiLCJhZExpa2UiLCJjYXJkU2VjdGlvbiIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJvcHRpb25zIiwiX3VybCIsImJhc2VVcmwiLCJfdG9rZW4iLCJ0b2tlbiIsIl9nZXRSZXNwb25jZURhdGEiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImFkZE5ld0NhcmQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImdldFByb2ZpbGUiLCJzZXRJbml0aWFsUHJvZmlsZSIsImNoYW5nZWF2YXRhciIsImFkZENhcmRCdXR0b24iLCJjYXJkRm9ybSIsImNhdGNoIiwiZmluYWxseSIsIl9wb3B1cFByZXZpZXciLCJ0ZXh0Iiwic3JjIiwiYWx0IiwiYXZhdGFySW1nIiwiZ2V0RWxlbWVudEJ5SWQiLCJvcGVuUHJvZmlsZUVkaXRvckJ1dHRvbiIsInByb2ZpbGVGb3JtIiwiY2hhbmdlQXZhdGFyQnV0dG9uIiwiYXZhdGFyRm9ybSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==